const u=fetch,h="";class H{constructor(e,t=h,n=u){this.basePath=t,this.fetch=n,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}}class d extends Error{constructor(e,t){super(t),this.field=e,Object.setPrototypeOf(this,d.prototype),this.name="RequiredError"}}const f=function(l){return{add(e,t,n={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling add.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling add.");let a="/api/v1/collections/{collection_id}/add".replace("{collection_id}",encodeURIComponent(String(e)));const o=a.indexOf("?"),r=Object.assign({method:"POST"},n),i=n.headers?new Headers(n.headers):new Headers,s=new URLSearchParams(o!==-1?a.substring(o+1):"");o!==-1&&(a=a.substring(0,o)),i.set("Content-Type","application/json"),r.headers=i,t!==void 0&&(r.body=JSON.stringify(t||{}));const c=s.toString();return c&&(a+="?"+c),{url:a,options:r}},aDelete(e,t,n={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling aDelete.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling aDelete.");let a="/api/v1/collections/{collection_id}/delete".replace("{collection_id}",encodeURIComponent(String(e)));const o=a.indexOf("?"),r=Object.assign({method:"POST"},n),i=n.headers?new Headers(n.headers):new Headers,s=new URLSearchParams(o!==-1?a.substring(o+1):"");o!==-1&&(a=a.substring(0,o)),i.set("Content-Type","application/json"),r.headers=i,t!==void 0&&(r.body=JSON.stringify(t||{}));const c=s.toString();return c&&(a+="?"+c),{url:a,options:r}},aGet(e,t,n={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling aGet.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling aGet.");let a="/api/v1/collections/{collection_id}/get".replace("{collection_id}",encodeURIComponent(String(e)));const o=a.indexOf("?"),r=Object.assign({method:"POST"},n),i=n.headers?new Headers(n.headers):new Headers,s=new URLSearchParams(o!==-1?a.substring(o+1):"");o!==-1&&(a=a.substring(0,o)),i.set("Content-Type","application/json"),r.headers=i,t!==void 0&&(r.body=JSON.stringify(t||{}));const c=s.toString();return c&&(a+="?"+c),{url:a,options:r}},count(e,t={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling count.");let n="/api/v1/collections/{collection_id}/count".replace("{collection_id}",encodeURIComponent(String(e)));const a=n.indexOf("?"),o=Object.assign({method:"GET"},t),r=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(a!==-1?n.substring(a+1):"");a!==-1&&(n=n.substring(0,a)),o.headers=r;const s=i.toString();return s&&(n+="?"+s),{url:n,options:o}},createCollection(e,t={}){if(e==null)throw new d("request","Required parameter request was null or undefined when calling createCollection.");let n="/api/v1/collections";const a=n.indexOf("?"),o=Object.assign({method:"POST"},t),r=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(a!==-1?n.substring(a+1):"");a!==-1&&(n=n.substring(0,a)),r.set("Content-Type","application/json"),o.headers=r,e!==void 0&&(o.body=JSON.stringify(e||{}));const s=i.toString();return s&&(n+="?"+s),{url:n,options:o}},createIndex(e,t={}){if(e==null)throw new d("collectionName","Required parameter collectionName was null or undefined when calling createIndex.");let n="/api/v1/collections/{collection_name}/create_index".replace("{collection_name}",encodeURIComponent(String(e)));const a=n.indexOf("?"),o=Object.assign({method:"POST"},t),r=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(a!==-1?n.substring(a+1):"");a!==-1&&(n=n.substring(0,a)),o.headers=r;const s=i.toString();return s&&(n+="?"+s),{url:n,options:o}},deleteCollection(e,t={}){if(e==null)throw new d("collectionName","Required parameter collectionName was null or undefined when calling deleteCollection.");let n="/api/v1/collections/{collection_name}".replace("{collection_name}",encodeURIComponent(String(e)));const a=n.indexOf("?"),o=Object.assign({method:"DELETE"},t),r=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(a!==-1?n.substring(a+1):"");a!==-1&&(n=n.substring(0,a)),o.headers=r;const s=i.toString();return s&&(n+="?"+s),{url:n,options:o}},getCollection(e,t={}){if(e==null)throw new d("collectionName","Required parameter collectionName was null or undefined when calling getCollection.");let n="/api/v1/collections/{collection_name}".replace("{collection_name}",encodeURIComponent(String(e)));const a=n.indexOf("?"),o=Object.assign({method:"GET"},t),r=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(a!==-1?n.substring(a+1):"");a!==-1&&(n=n.substring(0,a)),o.headers=r;const s=i.toString();return s&&(n+="?"+s),{url:n,options:o}},getNearestNeighbors(e,t,n={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling getNearestNeighbors.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling getNearestNeighbors.");let a="/api/v1/collections/{collection_id}/query".replace("{collection_id}",encodeURIComponent(String(e)));const o=a.indexOf("?"),r=Object.assign({method:"POST"},n),i=n.headers?new Headers(n.headers):new Headers,s=new URLSearchParams(o!==-1?a.substring(o+1):"");o!==-1&&(a=a.substring(0,o)),i.set("Content-Type","application/json"),r.headers=i,t!==void 0&&(r.body=JSON.stringify(t||{}));const c=s.toString();return c&&(a+="?"+c),{url:a,options:r}},heartbeat(e={}){let t="/api/v1/heartbeat";const n=t.indexOf("?"),a=Object.assign({method:"GET"},e),o=e.headers?new Headers(e.headers):new Headers,r=new URLSearchParams(n!==-1?t.substring(n+1):"");n!==-1&&(t=t.substring(0,n)),a.headers=o;const i=r.toString();return i&&(t+="?"+i),{url:t,options:a}},listCollections(e={}){let t="/api/v1/collections";const n=t.indexOf("?"),a=Object.assign({method:"GET"},e),o=e.headers?new Headers(e.headers):new Headers,r=new URLSearchParams(n!==-1?t.substring(n+1):"");n!==-1&&(t=t.substring(0,n)),a.headers=o;const i=r.toString();return i&&(t+="?"+i),{url:t,options:a}},persist(e={}){let t="/api/v1/persist";const n=t.indexOf("?"),a=Object.assign({method:"POST"},e),o=e.headers?new Headers(e.headers):new Headers,r=new URLSearchParams(n!==-1?t.substring(n+1):"");n!==-1&&(t=t.substring(0,n)),a.headers=o;const i=r.toString();return i&&(t+="?"+i),{url:t,options:a}},rawSql(e,t={}){if(e==null)throw new d("request","Required parameter request was null or undefined when calling rawSql.");let n="/api/v1/raw_sql";const a=n.indexOf("?"),o=Object.assign({method:"POST"},t),r=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(a!==-1?n.substring(a+1):"");a!==-1&&(n=n.substring(0,a)),r.set("Content-Type","application/json"),o.headers=r,e!==void 0&&(o.body=JSON.stringify(e||{}));const s=i.toString();return s&&(n+="?"+s),{url:n,options:o}},reset(e={}){let t="/api/v1/reset";const n=t.indexOf("?"),a=Object.assign({method:"POST"},e),o=e.headers?new Headers(e.headers):new Headers,r=new URLSearchParams(n!==-1?t.substring(n+1):"");n!==-1&&(t=t.substring(0,n)),a.headers=o;const i=r.toString();return i&&(t+="?"+i),{url:t,options:a}},root(e={}){let t="/api/v1";const n=t.indexOf("?"),a=Object.assign({method:"GET"},e),o=e.headers?new Headers(e.headers):new Headers,r=new URLSearchParams(n!==-1?t.substring(n+1):"");n!==-1&&(t=t.substring(0,n)),a.headers=o;const i=r.toString();return i&&(t+="?"+i),{url:t,options:a}},update(e,t,n={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling update.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling update.");let a="/api/v1/collections/{collection_id}/update".replace("{collection_id}",encodeURIComponent(String(e)));const o=a.indexOf("?"),r=Object.assign({method:"POST"},n),i=n.headers?new Headers(n.headers):new Headers,s=new URLSearchParams(o!==-1?a.substring(o+1):"");o!==-1&&(a=a.substring(0,o)),i.set("Content-Type","application/json"),r.headers=i,t!==void 0&&(r.body=JSON.stringify(t||{}));const c=s.toString();return c&&(a+="?"+c),{url:a,options:r}},updateCollection(e,t,n={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling updateCollection.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling updateCollection.");let a="/api/v1/collections/{collection_id}".replace("{collection_id}",encodeURIComponent(String(e)));const o=a.indexOf("?"),r=Object.assign({method:"PUT"},n),i=n.headers?new Headers(n.headers):new Headers,s=new URLSearchParams(o!==-1?a.substring(o+1):"");o!==-1&&(a=a.substring(0,o)),i.set("Content-Type","application/json"),r.headers=i,t!==void 0&&(r.body=JSON.stringify(t||{}));const c=s.toString();return c&&(a+="?"+c),{url:a,options:r}},upsert(e,t,n={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling upsert.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling upsert.");let a="/api/v1/collections/{collection_id}/upsert".replace("{collection_id}",encodeURIComponent(String(e)));const o=a.indexOf("?"),r=Object.assign({method:"POST"},n),i=n.headers?new Headers(n.headers):new Headers,s=new URLSearchParams(o!==-1?a.substring(o+1):"");o!==-1&&(a=a.substring(0,o)),i.set("Content-Type","application/json"),r.headers=i,t!==void 0&&(r.body=JSON.stringify(t||{}));const c=s.toString();return c&&(a+="?"+c),{url:a,options:r}},version(e={}){let t="/api/v1/version";const n=t.indexOf("?"),a=Object.assign({method:"GET"},e),o=e.headers?new Headers(e.headers):new Headers,r=new URLSearchParams(n!==-1?t.substring(n+1):"");n!==-1&&(t=t.substring(0,n)),a.headers=o;const i=r.toString();return i&&(t+="?"+i),{url:t,options:a}}}},w=function(l){return{add(e,t,n){const a=f().add(e,t,n);return(o=u,r=h)=>o(r+a.url,a.options).then(i=>{const s=i.headers.get("Content-Type"),c=s?s.replace(/;.*/,""):void 0;if(i.status===201){if(c==="application/json")return i.json();throw i}throw i.status===422,i})},aDelete(e,t,n){const a=f().aDelete(e,t,n);return(o=u,r=h)=>o(r+a.url,a.options).then(i=>{const s=i.headers.get("Content-Type"),c=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(c==="application/json")return i.json();throw i}throw i.status===422,i})},aGet(e,t,n){const a=f().aGet(e,t,n);return(o=u,r=h)=>o(r+a.url,a.options).then(i=>{const s=i.headers.get("Content-Type"),c=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(c==="application/json")return i.json();throw i}throw i.status===422,i})},count(e,t){const n=f().count(e,t);return(a=u,o=h)=>a(o+n.url,n.options).then(r=>{const i=r.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(r.status===200){if(s==="application/json")return r.json();throw r}throw r.status===422,r})},createCollection(e,t){const n=f().createCollection(e,t);return(a=u,o=h)=>a(o+n.url,n.options).then(r=>{const i=r.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(r.status===200){if(s==="application/json")return r.json();throw r}throw r.status===422,r})},createIndex(e,t){const n=f().createIndex(e,t);return(a=u,o=h)=>a(o+n.url,n.options).then(r=>{const i=r.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(r.status===200){if(s==="application/json")return r.json();throw r}throw r.status===422,r})},deleteCollection(e,t){const n=f().deleteCollection(e,t);return(a=u,o=h)=>a(o+n.url,n.options).then(r=>{const i=r.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(r.status===200){if(s==="application/json")return r.json();throw r}throw r.status===422,r})},getCollection(e,t){const n=f().getCollection(e,t);return(a=u,o=h)=>a(o+n.url,n.options).then(r=>{const i=r.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(r.status===200){if(s==="application/json")return r.json();throw r}throw r.status===422,r})},getNearestNeighbors(e,t,n){const a=f().getNearestNeighbors(e,t,n);return(o=u,r=h)=>o(r+a.url,a.options).then(i=>{const s=i.headers.get("Content-Type"),c=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(c==="application/json")return i.json();throw i}throw i.status===422,i})},heartbeat(e){const t=f().heartbeat(e);return(n=u,a=h)=>n(a+t.url,t.options).then(o=>{const r=o.headers.get("Content-Type"),i=r?r.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},listCollections(e){const t=f().listCollections(e);return(n=u,a=h)=>n(a+t.url,t.options).then(o=>{const r=o.headers.get("Content-Type"),i=r?r.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},persist(e){const t=f().persist(e);return(n=u,a=h)=>n(a+t.url,t.options).then(o=>{const r=o.headers.get("Content-Type"),i=r?r.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},rawSql(e,t){const n=f().rawSql(e,t);return(a=u,o=h)=>a(o+n.url,n.options).then(r=>{const i=r.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(r.status===200){if(s==="application/json")return r.json();throw r}throw r.status===422,r})},reset(e){const t=f().reset(e);return(n=u,a=h)=>n(a+t.url,t.options).then(o=>{const r=o.headers.get("Content-Type"),i=r?r.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},root(e){const t=f().root(e);return(n=u,a=h)=>n(a+t.url,t.options).then(o=>{const r=o.headers.get("Content-Type"),i=r?r.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},update(e,t,n){const a=f().update(e,t,n);return(o=u,r=h)=>o(r+a.url,a.options).then(i=>{const s=i.headers.get("Content-Type"),c=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(c==="application/json")return i.json();throw i}throw i.status===422,i})},updateCollection(e,t,n){const a=f().updateCollection(e,t,n);return(o=u,r=h)=>o(r+a.url,a.options).then(i=>{const s=i.headers.get("Content-Type"),c=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(c==="application/json")return i.json();throw i}throw i.status===422,i})},upsert(e,t,n){const a=f().upsert(e,t,n);return(o=u,r=h)=>o(r+a.url,a.options).then(i=>{const s=i.headers.get("Content-Type"),c=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(c==="application/json")return i.json();throw i}throw i.status===422,i})},version(e){const t=f().version(e);return(n=u,a=h)=>n(a+t.url,t.options).then(o=>{const r=o.headers.get("Content-Type"),i=r?r.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})}}};class Q extends H{add(e,t,n){return w(this.configuration).add(e,t,n)(this.fetch,this.basePath)}aDelete(e,t,n){return w(this.configuration).aDelete(e,t,n)(this.fetch,this.basePath)}aGet(e,t,n){return w(this.configuration).aGet(e,t,n)(this.fetch,this.basePath)}count(e,t){return w(this.configuration).count(e,t)(this.fetch,this.basePath)}createCollection(e,t){return w(this.configuration).createCollection(e,t)(this.fetch,this.basePath)}createIndex(e,t){return w(this.configuration).createIndex(e,t)(this.fetch,this.basePath)}deleteCollection(e,t){return w(this.configuration).deleteCollection(e,t)(this.fetch,this.basePath)}getCollection(e,t){return w(this.configuration).getCollection(e,t)(this.fetch,this.basePath)}getNearestNeighbors(e,t,n){return w(this.configuration).getNearestNeighbors(e,t,n)(this.fetch,this.basePath)}heartbeat(e){return w(this.configuration).heartbeat(e)(this.fetch,this.basePath)}listCollections(e){return w(this.configuration).listCollections(e)(this.fetch,this.basePath)}persist(e){return w(this.configuration).persist(e)(this.fetch,this.basePath)}rawSql(e,t){return w(this.configuration).rawSql(e,t)(this.fetch,this.basePath)}reset(e){return w(this.configuration).reset(e)(this.fetch,this.basePath)}root(e){return w(this.configuration).root(e)(this.fetch,this.basePath)}update(e,t,n){return w(this.configuration).update(e,t,n)(this.fetch,this.basePath)}updateCollection(e,t,n){return w(this.configuration).updateCollection(e,t,n)(this.fetch,this.basePath)}upsert(e,t,n){return w(this.configuration).upsert(e,t,n)(this.fetch,this.basePath)}version(e){return w(this.configuration).version(e)(this.fetch,this.basePath)}}var O;(function(l){(function(e){(function(t){t.Documents="documents",t.Embeddings="embeddings",t.Metadatas="metadatas",t.Distances="distances"})(e.IncludeEnum||(e.IncludeEnum={}))})(l.GetEmbedding||(l.GetEmbedding={})),function(e){(function(t){t.Documents="documents",t.Embeddings="embeddings",t.Metadatas="metadatas",t.Distances="distances"})(e.IncludeEnum||(e.IncludeEnum={}))}(l.QueryEmbedding||(l.QueryEmbedding={}))})(O||(O={}));class q{constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.authorization=e.authorization,this.basePath=e.basePath}}function p(l){return Array.isArray(l)?l:[l]}function P(l){return Array.isArray(l[0])?l:[l]}function V(l){return l&&typeof l=="object"?Array.isArray(l)?new Array(...l):Object.assign({},l):l}async function m(l){if(l instanceof Response)try{const e=await l.json();if("error"in e)return{error:e.error}}catch(e){return{error:e&&typeof e=="object"&&"message"in e?e.message:"unknown error"}}return{error:l}}async function g(l){switch(!0){case l instanceof Response:return V(await l.json());case typeof l=="string":return V(l);default:return V(l)}}class S{constructor(e,t,n,a,o){this.name=e,this.id=t,this.metadata=a,this.api=n,o!==void 0&&(this.embeddingFunction=o)}setName(e){this.name=e}setMetadata(e){this.metadata=e}async validate(e,t,n,a,o){if(e&&n===void 0&&o===void 0)throw new Error("embeddings and documents cannot both be undefined");if(n===void 0&&o!==void 0){const y=p(o);if(this.embeddingFunction!==void 0)n=await this.embeddingFunction.generate(y);else throw new Error("embeddingFunction is undefined. Please configure an embedding function")}if(n===void 0)throw new Error("embeddings is undefined but shouldnt be");const r=p(t),i=P(n);let s;a===void 0?s=void 0:s=p(a);let c;o===void 0?c=void 0:c=p(o);for(let y=0;y<r.length;y+=1)if(typeof r[y]!="string")throw new Error(`Expected ids to be strings, found ${typeof r[y]} at index ${y}`);if(i!==void 0&&r.length!==i.length||s!==void 0&&r.length!==s.length||c!==void 0&&r.length!==c.length)throw new Error("ids, embeddings, metadatas, and documents must all be the same length");if(new Set(r).size!==r.length){const y=r.filter((A,R)=>r.indexOf(A)!==R);throw new Error(`Expected IDs to be unique, found duplicates for: ${y}`)}return[r,i,s,c]}async add({ids:e,embeddings:t,metadatas:n,documents:a}){const[o,r,i,s]=await this.validate(!0,e,t,n,a);return await this.api.add(this.id,{ids:o,embeddings:r,documents:s,metadatas:i},this.api.options).then(g).catch(m)}async upsert({ids:e,embeddings:t,metadatas:n,documents:a}){const[o,r,i,s]=await this.validate(!0,e,t,n,a);return await this.api.upsert(this.id,{ids:o,embeddings:r,documents:s,metadatas:i},this.api.options).then(g).catch(m)}async count(){const e=await this.api.count(this.id,this.api.options);return g(e)}async modify({name:e,metadata:t}={}){const n=await this.api.updateCollection(this.id,{new_name:e,new_metadata:t},this.api.options).then(g).catch(m);return this.setName(e||this.name),this.setMetadata(t||this.metadata),n}async get({ids:e,where:t,limit:n,offset:a,include:o,whereDocument:r}={}){let i;return e!==void 0&&(i=p(e)),await this.api.aGet(this.id,{ids:i,where:t,limit:n,offset:a,include:o,where_document:r},this.api.options).then(g).catch(m)}async update({ids:e,embeddings:t,metadatas:n,documents:a}){if(t===void 0&&a===void 0&&n===void 0)throw new Error("embeddings, documents, and metadatas cannot all be undefined");if(t===void 0&&a!==void 0){const r=p(a);if(this.embeddingFunction!==void 0)t=await this.embeddingFunction.generate(r);else throw new Error("embeddingFunction is undefined. Please configure an embedding function")}n!==void 0&&(n=p(n)),a!==void 0&&(a=p(a));var o=await this.api.update(this.id,{ids:p(e),embeddings:t?P(t):void 0,documents:a,metadatas:n},this.api.options).then(g).catch(m);return o}async query({queryEmbeddings:e,nResults:t,where:n,queryTexts:a,whereDocument:o,include:r}){if(t===void 0&&(t=10),e===void 0&&a===void 0)throw new Error("queryEmbeddings and queryTexts cannot both be undefined");if(e===void 0&&a!==void 0){const s=p(a);if(this.embeddingFunction!==void 0)e=await this.embeddingFunction.generate(s);else throw new Error("embeddingFunction is undefined. Please configure an embedding function")}if(e===void 0)throw new Error("embeddings is undefined but shouldnt be");const i=P(e);return await this.api.getNearestNeighbors(this.id,{query_embeddings:i,where:n,n_results:t,where_document:o,include:r},this.api.options).then(g).catch(m)}async peek({limit:e}={}){e===void 0&&(e=10);const t=await this.api.aGet(this.id,{limit:e},this.api.options);return g(t)}async delete({ids:e,where:t,whereDocument:n}={}){let a;return e!==void 0&&(a=p(e)),await this.api.aDelete(this.id,{ids:a,where:t,where_document:n},this.api.options).then(g).catch(m)}}class x{constructor({path:e,fetchOptions:t}={}){e===void 0&&(e="http://localhost:8000");const n=new q({basePath:e});this.api=new Q(n),this.api.options=t??{}}async reset(){return await this.api.reset(this.api.options)}async version(){const e=await this.api.version(this.api.options);return await g(e)}async heartbeat(){const e=await this.api.heartbeat(this.api.options);return(await g(e))["nanosecond heartbeat"]}async persist(){throw new Error("Not implemented in JS client")}async createCollection({name:e,metadata:t,embeddingFunction:n}){const a=await this.api.createCollection({name:e,metadata:t},this.api.options).then(g).catch(m);if(a.error)throw new Error(a.error);return new S(e,a.id,this.api,t,n)}async getOrCreateCollection({name:e,metadata:t,embeddingFunction:n}){const a=await this.api.createCollection({name:e,metadata:t,get_or_create:!0},this.api.options).then(g).catch(m);if(a.error)throw new Error(a.error);return new S(e,a.id,this.api,a.metadata,n)}async listCollections(){const e=await this.api.listCollections(this.api.options);return g(e)}async getCollection({name:e,embeddingFunction:t}){const n=await this.api.getCollection(e,this.api.options).then(g).catch(m);if(n.error)throw new Error(n.error);return new S(n.name,n.id,this.api,n.metadata,t)}async deleteCollection({name:e}){return await this.api.deleteCollection(e,this.api.options).then(g).catch(m)}}let C;class F{constructor({openai_api_key:e,openai_model:t,openai_organization_id:n}){try{C=require("openai")}catch{throw new Error("Please install the openai package to use the OpenAIEmbeddingFunction, `npm install -S openai`")}this.api_key=e,this.org_id=n||"",this.model=t||"text-embedding-ada-002"}async generate(e){const t=new C.Configuration({organization:this.org_id,apiKey:this.api_key}),n=new C.OpenAIApi(t),a=[],r=(await n.createEmbedding({model:this.model,input:e})).data.data;for(let i=0;i<r.length;i+=1)a.push(r[i].embedding);return a}}let T;class _{constructor({cohere_api_key:e,model:t}){try{T=require("cohere-ai"),T.init(e)}catch{throw new Error("Please install the cohere-ai package to use the CohereEmbeddingFunction, `npm install -S cohere-ai`")}this.api_key=e,this.model=t||"large"}async generate(e){return(await T.embed({texts:e,model:this.model})).body.embeddings}}let b;class v{constructor(e,t,n,a,o){if(t){this.proxy=n||!1;try{b=require("@visheratin/web-ai-node")}catch(r){throw console.log(r),new Error("Please install the @visheratin/web-ai-node package to use the WebAIEmbeddingFunction, `npm install -S @visheratin/web-ai-node`")}}else{this.proxy=n||!0;try{b=require("@visheratin/web-ai")}catch(r){throw console.log(r),new Error("Please install the @visheratin/web-ai package to use the WebAIEmbeddingFunction, `npm install -S @visheratin/web-ai`")}}switch(a&&(b.SessionParams.wasmRoot=a),e){case"text":{let r="mini-lm-v2-quant";o&&(r=o);const i=b.ListTextModels();for(const s of i)if(s.id===r){this.model=new b.TextFeatureExtractionModel(s);return}throw new Error(`Could not find text model with id ${o} in the WebAI package`)}case"image":{let r="efficientformer-l1-feature-quant";o&&(r=o);const i=b.ListImageModels();for(const s of i)if(s.id===r){this.model=new b.ImageFeatureExtractionModel(s);return}throw new Error(`Could not find image model with id ${o} in the WebAI package`)}}}async generate(e){this.model.initialized||await this.model.init(this.proxy);const n=(await this.model.process(e)).result;return n.length>0&&Array.isArray(n[0])?n:[n]}}let j;class U{constructor({model:e="Xenova/all-MiniLM-L6-v2",revision:t="main",quantized:n=!1,progress_callback:a=null}={}){try{j=Function('return import("@xenova/transformers")')()}catch{throw new Error("Please install the @xenova/transformers package to use the TransformersEmbeddingFunction, `npm install -S @xenova/transformers`.")}this.pipelinePromise=new Promise(async(o,r)=>{try{const{pipeline:i}=await j;o(await i("feature-extraction",e,{quantized:n,revision:t,progress_callback:a}))}catch(i){r(i)}})}async generate(e){return(await(await this.pipelinePromise)(e,{pooling:"mean",normalize:!0})).tolist()}}export{x as ChromaClient,_ as CohereEmbeddingFunction,S as Collection,F as OpenAIEmbeddingFunction,U as TransformersEmbeddingFunction,v as WebAIEmbeddingFunction};
